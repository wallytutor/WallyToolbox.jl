<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>RadCalNet · WallyToolbox.jl</title><meta name="title" content="RadCalNet · WallyToolbox.jl"/><meta property="og:title" content="RadCalNet · WallyToolbox.jl"/><meta property="twitter:title" content="RadCalNet · WallyToolbox.jl"/><meta name="description" content="Documentation for WallyToolbox.jl."/><meta property="og:description" content="Documentation for WallyToolbox.jl."/><meta property="twitter:description" content="Documentation for WallyToolbox.jl."/><meta property="og:url" content="https://wallytutor.github.io/WallyToolbox.jl/RadCalNet/"/><meta property="twitter:url" content="https://wallytutor.github.io/WallyToolbox.jl/RadCalNet/"/><link rel="canonical" href="https://wallytutor.github.io/WallyToolbox.jl/RadCalNet/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">WallyToolbox.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Dry Packages</span><ul><li><a class="tocitem" href="../DryCombustion/">DryCombustion</a></li><li><a class="tocitem" href="../DryFlowsheet/">DryFlowsheet</a></li><li><a class="tocitem" href="../DryGranular/">DryGranular</a></li><li><a class="tocitem" href="../DryMaterials/">DryMaterials</a></li><li><a class="tocitem" href="../DryTransport/">DryTransport</a></li><li><a class="tocitem" href="../helpers/">Helpers</a></li></ul></li><li><a class="tocitem" href="../Cantera/">Cantera</a></li><li><a class="tocitem" href="../OpenFOAM/">OpenFOAM</a></li><li class="is-active"><a class="tocitem" href>RadCalNet</a><ul class="internal"><li><a class="tocitem" href="#Usage"><span>Usage</span></a></li><li><a class="tocitem" href="#To-do&#39;s"><span>To-do&#39;s</span></a></li><li><a class="tocitem" href="#Literature-discussion"><span>Literature discussion</span></a></li><li><a class="tocitem" href="#All-interfaces"><span>All interfaces</span></a></li></ul></li><li><a class="tocitem" href="../toc/">Table of Contents</a></li><li><a class="tocitem" href="../References/">References</a></li><li><span class="tocitem">Teaching</span><ul><li><a class="tocitem" href="../Teaching/Machine Learning/">Machine Learning</a></li><li><a class="tocitem" href="../Teaching/Transport Phenomena/">Transport Phenomena</a></li><li><a class="tocitem" href="../Teaching/Basilisk/Basilisk/">Basilisk</a></li><li><a class="tocitem" href="../Teaching/OpenFOAM/">OpenFOAM</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>RadCalNet</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>RadCalNet</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/wallytutor/WallyToolbox.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/wallytutor/WallyToolbox.jl/blob/main/docs/src/RadCalNet/index.md" title="View source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="RadCalNet"><a class="docs-heading-anchor" href="#RadCalNet">RadCalNet</a><a id="RadCalNet-1"></a><a class="docs-heading-anchor-permalink" href="#RadCalNet" title="Permalink"></a></h1><p>Radiation properties machine learning model trained on RadCal.</p><p>In this project we use the re-implementation of <a href="https://github.com/firemodels/radcal">RadCal</a> (Grosshandler1993)[<a href="../References/#Grosshandler1993">4</a>] to generate data and train a machine learning model for the prediction of radiative properties, <em>i.e.</em> emissivity and transmissivity, of common combustion flue gases.</p><p>This is done because for real-time calls of RADCAL might be computationally prohibitive, for instance in CFD applications. Thus, a neural network is trained with <a href="https://fluxml.ai/Flux.jl/stable/">Flux</a> based on the simulated data and this module provides an interface to call the network from external programs (Ansys Fluent, OpenFOAM, ...).</p><p>For details of validity ranges and sample space, please check function <a href="#RadCalNet.datasampler!-Tuple{Vector{Float64}}"><code>RadCalNet.datasampler!</code></a>, where random sampling is provided. Indexing of species array is documented at <a href="#RadCalNet.runradcalinput-Tuple{}"><code>RadCalNet.runradcalinput</code></a>.</p><p>Below we display the quality of fitting of model. One must notice that fitting of emissivity still needs a few adjustments, while transmissivity is well predicted over the whole range.</p><p><img src="media/testing.png" alt="Model testing"/></p><h2 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h2><p>The following snippet illustrates everything the model was designed to do.</p><pre><code class="language-julia-repl hljs">julia&gt; using RadCalNet;

julia&gt; x = Float32[1200.0; 1000.0; 2.0; 1.0; 0.1; 0.2; 0.1];

julia&gt; y = RadCalNet.model(x)
2-element Vector{Float32}:
 0.3231391
 0.6287435</code></pre><p>The array of inputs <code>x</code> is defined below, and <code>y</code> provides gas emissitivy and transmissivity, respectively. Notice that <code>x</code> must be a column vector with entries of type <code>Float32</code>.</p><table><tr><th style="text-align: center">Index</th><th style="text-align: center">Quantity</th><th style="text-align: center">Units</th><th style="text-align: center">Minimum</th><th style="text-align: center">Maximum</th></tr><tr><td style="text-align: center">1</td><td style="text-align: center">Wall temperature</td><td style="text-align: center">K</td><td style="text-align: center">300</td><td style="text-align: center">2500</td></tr><tr><td style="text-align: center">2</td><td style="text-align: center">Gas temperature</td><td style="text-align: center">K</td><td style="text-align: center">300</td><td style="text-align: center">2500</td></tr><tr><td style="text-align: center">3</td><td style="text-align: center">Depth</td><td style="text-align: center">m</td><td style="text-align: center">0.1</td><td style="text-align: center">3.0</td></tr><tr><td style="text-align: center">4</td><td style="text-align: center">Pressure</td><td style="text-align: center">atm</td><td style="text-align: center">0.5</td><td style="text-align: center">1.5</td></tr><tr><td style="text-align: center">5</td><td style="text-align: center">CO2 mole fraction</td><td style="text-align: center">-</td><td style="text-align: center">0.0</td><td style="text-align: center">0.25</td></tr><tr><td style="text-align: center">6</td><td style="text-align: center">H2O mole fraction</td><td style="text-align: center">-</td><td style="text-align: center">0.0</td><td style="text-align: center">0.30</td></tr><tr><td style="text-align: center">7</td><td style="text-align: center">CO  mole fraction</td><td style="text-align: center">-</td><td style="text-align: center">0.0</td><td style="text-align: center">0.20</td></tr></table><p>For practical applications, one generally is interested in calling the model with a large inputs set. Belowe we illustrate how to do this with a block of data and verify the predictions are within the model tolerance on average.</p><pre><code class="language-julia hljs">using WallyToolbox
using RadCalNet
using Flux: mae

# Loss after last training.
LOSS = 0.0022

# Random sample data randomly extracted (20 rows).
TESTDATA = Float32[
    1670.0   960.0  1.9  0.5  0.15  0.18  0.03   0.161774   0.820025
    1230.0   320.0  1.9  1.0  0.04  0.08  0.18   0.20205    0.79694
    1760.0   770.0  2.1  1.5  0.22  0.24  0.12   0.309017   0.669564
    1770.0   960.0  1.9  0.5  0.15  0.0   0.13   0.0721235  0.919333
     350.0  1590.0  1.9  1.0  0.06  0.29  0.12   0.357215   0.169437
    2330.0  1820.0  1.1  1.5  0.13  0.08  0.13   0.100282   0.840802
    1220.0  2070.0  0.2  0.5  0.11  0.17  0.09   0.0361672  0.902581
     760.0  1380.0  1.9  1.5  0.1   0.01  0.10   0.188531   0.69798
    1870.0  1880.0  0.2  1.5  0.14  0.28  0.17   0.0819803  0.858508
    1910.0  2220.0  1.3  1.5  0.2   0.3   0.09   0.202592   0.63856
    2290.0   360.0  1.8  0.5  0.0   0.23  0.07   0.0755366  0.914045
    1330.0   640.0  1.7  1.5  0.21  0.04  0.06   0.227428   0.764363
    1090.0  1260.0  1.9  1.5  0.17  0.18  0.18   0.381407   0.501751
    1250.0  1590.0  0.4  1.5  0.13  0.27  0.18   0.191725   0.688272
     990.0  2320.0  0.5  1.0  0.23  0.27  0.03   0.118285   0.633932
    1920.0   720.0  0.3  1.0  0.05  0.03  0.18   0.0496579  0.945693
    1250.0   310.0  0.6  1.0  0.04  0.18  0.15   0.171857   0.827273
    1990.0  1020.0  1.3  1.0  0.09  0.11  0.15   0.140596   0.837042
    1180.0  1830.0  0.3  0.5  0.09  0.29  0.02   0.0682171  0.851304
    2120.0  1230.0  2.9  1.5  0.03  0.06  0.17   0.168034   0.791942
]

# Predictors and targets transposed.
X = transpose(TESTDATA[:, 1:7])
Y = transpose(TESTDATA[:, 8:9])

mae(RadCalNet.model(X), Y) &lt;= LOSS

# output

true</code></pre><p>The following test can also be seen as a tutorial for data generation, where we make the verification of data generation with provided seed.  See <a href="#RadCalNet.createcustomdatabase-Tuple{}"><code>RadCalNet.createcustomdatabase</code></a> for more details. An alternative <a href="#RadCalNet.datasampler!-Tuple{Vector{Float64}}"><code>RadCalNet.datasampler!</code></a> can be provided for specific problems.</p><pre><code class="language-julia hljs">import Random
using WallyToolbox
using RadCalNet

function sampledatabase()
    #XXX: documentation is run from root directory!
    testname = joinpath(joinpath(@__DIR__, &quot;src/RadCalNet/data/sample.dat&quot;))

    # Provide a seed at start-up for *maybe* reproducible builds.
    Random.seed!(42)

    if !isfile(testname)
        RadCalNet.createcustomdatabase(;
            sampler!   = RadCalNet.datasampler!,
            repeats    = 3,
            samplesize = 3,
            cleanup    = true,
            saveas     = testname,
            override   = true
        )
    end

    return RadCalNet.loaddatabase(testname)
end

A = sampledatabase()[:, end-5:end]

# output

9×6 Matrix{Float32}:
 0.61  0.0006522    0.00680899  0.127997       1.4369f5   0.784483
 0.63  0.00147905   0.0163017   0.256072   52761.9        0.493376
 0.8   0.00181013   0.0525569   0.209679    1712.82       0.743175
 0.69  0.000962085  0.0317917   0.0917254      3.80101f5  0.88582
 0.69  0.00246231   0.0538234   0.418247    1442.63       0.479691
 0.68  0.00210072   0.00470752  0.0997078  71325.7        0.79875
 0.67  0.000770321  0.0101432   0.0812446      3.0696f5   0.815462
 0.7   0.00154008   0.0215186   0.253691   24945.7        0.478712
 0.53  0.00133843   0.0180676   0.234852   21784.6        0.7443</code></pre><h2 id="To-do&#39;s"><a class="docs-heading-anchor" href="#To-do&#39;s">To-do&#39;s</a><a id="To-do&#39;s-1"></a><a class="docs-heading-anchor-permalink" href="#To-do&#39;s" title="Permalink"></a></h2><ul><li>Broaden sample space over the whole RadCal composition spectrum.</li><li>Define data loading on GPU/CPU though a flag when recovering model.</li><li>Create database for testing outside of sampling points.</li><li>Improve model reload and organize a notebook for training.</li></ul><h2 id="Literature-discussion"><a class="docs-heading-anchor" href="#Literature-discussion">Literature discussion</a><a id="Literature-discussion-1"></a><a class="docs-heading-anchor-permalink" href="#Literature-discussion" title="Permalink"></a></h2><h3 id="Verification-agains-Gorog&#39;s-paper"><a class="docs-heading-anchor" href="#Verification-agains-Gorog&#39;s-paper">Verification agains Gorog&#39;s paper</a><a id="Verification-agains-Gorog&#39;s-paper-1"></a><a class="docs-heading-anchor-permalink" href="#Verification-agains-Gorog&#39;s-paper" title="Permalink"></a></h3><p>Below we compare computed values with those by (Gorog1981a)[<a href="../References/#Gorog1981a">5</a>]. Reference paper is found <a href="https://doi.org/10.1007/BF02674758">here</a>.</p><p><img src="media/emissivity.png" alt="Emissivity"/></p><p><img src="media/absorptivity.png" alt="Absorptivity"/></p><p>At least qualitative agreement is found and orders of magnitude are right. On the other hand, using directly the model parameters from (Tam2019)[<a href="../References/#Tam2019">6</a>] do not produce the expected results (not displayed, work in progress in this <a href="data/tam2019.jl">draft</a>). It is not clear how the data is pre- and post-processed for use with their network.</p><h2 id="All-interfaces"><a class="docs-heading-anchor" href="#All-interfaces">All interfaces</a><a id="All-interfaces-1"></a><a class="docs-heading-anchor-permalink" href="#All-interfaces" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.ModelData" href="#RadCalNet.ModelData"><code>RadCalNet.ModelData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ModelData(fpath::String; f_train::Float64 = 0.7)</code></pre><p>Load HDF5 database stored under <code>fpath</code> and performs standardized workflow of data preparation for model training. The data is split under training and testing datasets with a fraction of training data of <code>f_train</code>.</p><ul><li><p><code>scaler::StatsBase.ZScoreTransform{Float32, Vector{Float32}}</code>: Scaler used for data transformation.</p></li><li><p><code>X_train::Matrix{Float32}</code>: Matrix of training input data.</p></li><li><p><code>Y_train::Matrix{Float32}</code>: Matrix of training output data.</p></li><li><p><code>X_tests::Matrix{Float32}</code>: Matrix of testing input data.</p></li><li><p><code>Y_tests::Matrix{Float32}</code>: Matrix of testing output data.</p></li><li><p><code>n_inputs::Int64</code>: Number of model inputs.</p></li><li><p><code>n_outputs::Int64</code>: Number of model outputs.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L247-L255">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.ModelTrainer" href="#RadCalNet.ModelTrainer"><code>RadCalNet.ModelTrainer</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ModelTrainer(
    data::ModelData,
    model::Chain;
    batch::Int64=64,
    epochs::Int64=100,
    η::Float64=0.001,
    β::Tuple{Float64,Float64}=(0.9, 0.999),
    ϵ::Float64=1.0e-08
)</code></pre><p>Holds standardized model training parameters and data.</p><ul><li><p><code>batch::Int64</code>: Batch size in training loop.</p></li><li><p><code>epochs::Int64</code>: Number of epochs to train each time.</p></li><li><p><code>data::RadCalNet.ModelData</code>: Database structure used for training/testing.</p></li><li><p><code>model::Flux.Chain</code>: Multi-layer perceptron used for modeling.</p></li><li><p><code>optim::NamedTuple</code>: Internal Adam optimizer.</p></li><li><p><code>losses::Vector{Float32}</code>: History of losses.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L310-L324">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.createcustomdatabase-Tuple{}" href="#RadCalNet.createcustomdatabase-Tuple{}"><code>RadCalNet.createcustomdatabase</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">createcustomdatabase(;
    sampler!::Function,
    repeats::Int64 = 100,
    samplesize::Int64 = 50_000,
    cleanup::Bool = false,
    saveas::String = &quot;database.h5&quot;,
    OMMIN::Float64 = 50.0,
    OMMAX::Float64 = 10000.0,
    override::Bool = false
)</code></pre><p>Creates a custom database by generating a number <code>repeats</code> of samples of <code>samplesize</code> rows. Inputs for <code>runradcalinput</code> are to be generated by a <code>sampler!</code> user-defined function which modifies in place an array of compositions, and returns <code>T</code>, <code>L</code>, <code>P</code>, <code>FV</code>, <code>TWALL</code> for setting up a simulation. Files are temporarilly stored under <code>data/</code> with a sequential numbered naming during database creation and aggregated in a HDF5 file named after <code>saveas</code>. The choice to aggregate files after an initial dump is because generation can be interrupted and manually recovered in an easier way and avoiding any risk of data losses - database creation can take a very long time. If <code>cleanup</code> is <code>true</code>, all intermediate files are removed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L107-L130">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.datasampler!-Tuple{Vector{Float64}}" href="#RadCalNet.datasampler!-Tuple{Vector{Float64}}"><code>RadCalNet.datasampler!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">datasampler!(X::Vector{Float64})::Tuple</code></pre><p>Custom sample space to generate entries with <code>createcustomdatabase</code>. This function contains the parameter space used for model training.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L212-L217">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.defaultmodel-Tuple{}" href="#RadCalNet.defaultmodel-Tuple{}"><code>RadCalNet.defaultmodel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">defaultmodel()</code></pre><p>Build model structure with which RadCalNet is trained.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L402-L406">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.dumpscaler-Tuple{StatsBase.ZScoreTransform{Float32, Vector{Float32}}, String}" href="#RadCalNet.dumpscaler-Tuple{StatsBase.ZScoreTransform{Float32, Vector{Float32}}, String}"><code>RadCalNet.dumpscaler</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">dumpscaler(scaler::ZScoreTransform{Float32,V32}, saveas::String)</code></pre><p>Write z-score <code>scaler</code> mean and scale to provided <code>saveas</code> YAML file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L359-L363">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.getradcalnet-Tuple{}" href="#RadCalNet.getradcalnet-Tuple{}"><code>RadCalNet.getradcalnet</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getradcalnet(;
    scale = true,
    fscaler = nothing,
    fmstate = nothing
)</code></pre><p>Load trained model and scaler to compose RadCalNet. If testing new models, it might be useful to use <code>fscaler</code> and <code>fmstate</code> to point to specific versions of scaler and model state files.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L507-L517">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.loaddatabase-Tuple{String}" href="#RadCalNet.loaddatabase-Tuple{String}"><code>RadCalNet.loaddatabase</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">loaddatabase(fname::String)</code></pre><p>Retrieve database from HDF5 file and access table as a matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L197-L201">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.loadscaler-Tuple{String}" href="#RadCalNet.loadscaler-Tuple{String}"><code>RadCalNet.loadscaler</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">loadscaler(fname::String)::Function</code></pre><p>Load z-scaler in functional format from YAML <code>fname</code> file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L369-L373">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.makemodel-Tuple{Vector{Tuple{Int64, Any}}}" href="#RadCalNet.makemodel-Tuple{Vector{Tuple{Int64, Any}}}"><code>RadCalNet.makemodel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">makemodel(layers::Vector{Tuple{Int64, Any}}; bn = false)::Chain</code></pre><p>Create a multi-layer perceptron for learning radiative properties with the provided <code>layers</code>. If <code>bn</code> is true, then batch normalization after each layer. The final layer has by default a sigmoid function to ensure physical outputs in range [0, 1].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L381-L388">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.model" href="#RadCalNet.model"><code>RadCalNet.model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">model(x::Vector{Float32})::Vector{Float32}</code></pre><p>Main model interface for emissivity and transmissivity.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L534-L539">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.plottests-Tuple{RadCalNet.ModelTrainer}" href="#RadCalNet.plottests-Tuple{RadCalNet.ModelTrainer}"><code>RadCalNet.plottests</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plottests(trainer::ModelTrainer; num::Int64)</code></pre><p>Evaluate model over <code>num</code> data points and compare the data to the expected values as computed from RadCal. Makes use of test data only - never seem by the model during training.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L461-L467">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.runradcalinput-Tuple{}" href="#RadCalNet.runradcalinput-Tuple{}"><code>RadCalNet.runradcalinput</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">runradcalinput(;
    X::Dict{String, Float64} = Dict{String, Float64}(),
    T::Float64 = 300.0,
    L::Float64 = 1.0,
    P::Float64 = 1.0,
    FV::Float64 = 0.0,
    OMMIN::Float64 = 50.0,
    OMMAX::Float64 = 10000.0,
    TWALL::Float64 = 500.0,
    radcalexe::String = &quot;radcal_win_64.exe&quot;
)::Vector{Float64}</code></pre><p>Create RADCAL.IN from template file and dump to disk.</p><p><strong>NOTE:</strong> the user is responsible to provide a vector <code>X</code> of mole fractions of species that sums up to one. If this is not respected RADCAL fails. The Following list provides the indexes of available species in vector <code>X</code>.</p><table><tr><th style="text-align: right">Index</th><th style="text-align: left">Species</th><th style="text-align: right">Index</th><th style="text-align: left">Species</th><th style="text-align: right">Index</th><th style="text-align: left">Species</th></tr><tr><td style="text-align: right">1</td><td style="text-align: left">CO2</td><td style="text-align: right">6</td><td style="text-align: left">C2H6</td><td style="text-align: right">11</td><td style="text-align: left">CH3OH</td></tr><tr><td style="text-align: right">2</td><td style="text-align: left">H2O</td><td style="text-align: right">7</td><td style="text-align: left">C3H6</td><td style="text-align: right">12</td><td style="text-align: left">MMA</td></tr><tr><td style="text-align: right">3</td><td style="text-align: left">CO</td><td style="text-align: right">8</td><td style="text-align: left">C3H8</td><td style="text-align: right">13</td><td style="text-align: left">O2</td></tr><tr><td style="text-align: right">4</td><td style="text-align: left">CH4</td><td style="text-align: right">9</td><td style="text-align: left">C7H8</td><td style="text-align: right">14</td><td style="text-align: left">N2</td></tr><tr><td style="text-align: right">5</td><td style="text-align: left">C2H4</td><td style="text-align: right">10</td><td style="text-align: left">C7H16</td><td style="text-align: right"></td><td style="text-align: left"></td></tr></table></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L28-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.samplecols-Tuple{Int64, Int64}" href="#RadCalNet.samplecols-Tuple{Int64, Int64}"><code>RadCalNet.samplecols</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get sample of indexes for data retrieval.  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L421">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.tests-Tuple{RadCalNet.ModelData, Int64}" href="#RadCalNet.tests-Tuple{RadCalNet.ModelData, Int64}"><code>RadCalNet.tests</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get testing data for data loader construction. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L432">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.train-Tuple{RadCalNet.ModelData, Int64}" href="#RadCalNet.train-Tuple{RadCalNet.ModelData, Int64}"><code>RadCalNet.train</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get training data for data loader construction. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L426">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RadCalNet.trainonce!-Tuple{RadCalNet.ModelTrainer}" href="#RadCalNet.trainonce!-Tuple{RadCalNet.ModelTrainer}"><code>RadCalNet.trainonce!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">trainonce!(trainer::ModelTrainer; num = 1_000)</code></pre><p>Train model and keep track of loss for the number of epochs in <code>trainer</code> using its internal data and parameters. Use <code>num</code> data points.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wallytutor/WallyToolbox.jl/blob/32838418ba564d7ef1bfa94aaf6d6d2ab5ed96dd/src/RadCalNet.jl#L438-L443">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../OpenFOAM/">« OpenFOAM</a><a class="docs-footer-nextpage" href="../toc/">Table of Contents »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Wednesday 1 May 2024 19:58">Wednesday 1 May 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
