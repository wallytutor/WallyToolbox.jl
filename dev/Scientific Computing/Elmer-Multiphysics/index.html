<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Elmer Multiphysics · WallyToolbox.jl</title><meta name="title" content="Elmer Multiphysics · WallyToolbox.jl"/><meta property="og:title" content="Elmer Multiphysics · WallyToolbox.jl"/><meta property="twitter:title" content="Elmer Multiphysics · WallyToolbox.jl"/><meta name="description" content="Documentation for WallyToolbox.jl."/><meta property="og:description" content="Documentation for WallyToolbox.jl."/><meta property="twitter:description" content="Documentation for WallyToolbox.jl."/><meta property="og:url" content="https://wallytutor.github.io/WallyToolbox.jl/Scientific Computing/Elmer-Multiphysics/"/><meta property="twitter:url" content="https://wallytutor.github.io/WallyToolbox.jl/Scientific Computing/Elmer-Multiphysics/"/><link rel="canonical" href="https://wallytutor.github.io/WallyToolbox.jl/Scientific Computing/Elmer-Multiphysics/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">WallyToolbox.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">WallyToolbox</span><ul><li><a class="tocitem" href="../../">Home</a></li><li><input class="collapse-toggle" id="menuitem-1-2" type="checkbox"/><label class="tocitem" for="menuitem-1-2"><span class="docs-label">Julia Modules</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Modules/DryCombustion/">DryCombustion</a></li><li><a class="tocitem" href="../../Modules/DryFlowsheet/">DryFlowsheet</a></li><li><a class="tocitem" href="../../Modules/DryGranular/">DryGranular</a></li><li><a class="tocitem" href="../../Modules/DryMaterials/">DryMaterials</a></li><li><a class="tocitem" href="../../Modules/DryTransport/">DryTransport</a></li><li><a class="tocitem" href="../../Modules/RadCalNet/">RadCalNet</a></li><li><a class="tocitem" href="../../Modules/Cantera/">Cantera</a></li><li><a class="tocitem" href="../../Modules/OpenFOAM/">OpenFOAM</a></li><li><a class="tocitem" href="../../Modules/helpers/">Helpers</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-1-3" type="checkbox" checked/><label class="tocitem" for="menuitem-1-3"><span class="docs-label">Scientific Computing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../">Scientific Computing</a></li><li><a class="tocitem" href="../OpenFOAM11/">OpenFOAM 11</a></li><li class="is-active"><a class="tocitem" href>Elmer Multiphysics</a><ul class="internal"><li><a class="tocitem" href="#Quick-answers"><span>Quick answers</span></a></li><li><a class="tocitem" href="#Limitations-and-issues"><span>Limitations and issues</span></a></li><li><a class="tocitem" href="#Ongoing-work"><span>Ongoing work</span></a></li><li><a class="tocitem" href="#Retrieving-materials"><span>Retrieving materials</span></a></li><li><a class="tocitem" href="#Preprocessing-steps"><span>Preprocessing steps</span></a></li><li><a class="tocitem" href="#Using-Elmer"><span>Using Elmer</span></a></li><li><a class="tocitem" href="#Parallel-computing"><span>Parallel computing</span></a></li><li><a class="tocitem" href="#Tips-and-ideas"><span>Tips and ideas</span></a></li><li><a class="tocitem" href="#Material-properties"><span>Material properties</span></a></li><li><a class="tocitem" href="#Postprocessing"><span>Postprocessing</span></a></li></ul></li><li><a class="tocitem" href="../Elmer-Documentation/">Elmer Documentation</a></li><li><a class="tocitem" href="../Basilisk/">Basilisk</a></li><li><a class="tocitem" href="../LAMMPS/">LAMMPS</a></li><li><a class="tocitem" href="../PINNs/">Physics-Informed Neural Networks</a></li><li><a class="tocitem" href="../General-Computing-Skills/">General computing skills</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-1-4" type="checkbox"/><label class="tocitem" for="menuitem-1-4"><span class="docs-label">Transport Phenomena</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Transport Phenomena/01-Transport-phenomena-foundations/">Analysis of transport phenomena</a></li><li><a class="tocitem" href="../../Transport Phenomena/02-Applications-to-mass-and-heat-transfer/">Mass and energy transfer</a></li><li><a class="tocitem" href="../../Transport Phenomena/03-Applications-to-fluid-mechanics/">Fluid mechanics</a></li><li><a class="tocitem" href="../../Transport Phenomena/A2-Dimensionless-groups/">Dimensionless groups</a></li><li><a class="tocitem" href="../../Transport Phenomena/A4-Finite-Volume-Diffusion/">Formulations of heat conduction</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-1-5" type="checkbox"/><label class="tocitem" for="menuitem-1-5"><span class="docs-label">Notebooks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Notebooks/01-Composite-Conduction/">Steady-state heat transfer</a></li><li><a class="tocitem" href="../../Notebooks/02-Part-Radiation-Heating/">Transient heat transfer</a></li></ul></li><li><a class="tocitem" href="../../References/">References</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">WallyToolbox</a></li><li><a class="is-disabled">Scientific Computing</a></li><li class="is-active"><a href>Elmer Multiphysics</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Elmer Multiphysics</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/wallytutor/WallyToolbox.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/wallytutor/WallyToolbox.jl/blob/main/docs/tmp/Scientific Computing/Elmer-Multiphysics.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Elmer-Multiphysics"><a class="docs-heading-anchor" href="#Elmer-Multiphysics">Elmer Multiphysics</a><a id="Elmer-Multiphysics-1"></a><a class="docs-heading-anchor-permalink" href="#Elmer-Multiphysics" title="Permalink"></a></h1><p>Elmer is a multiphysics finite element method (FEM) solver mainly developed by CSC and maintained at <a href="https://github.com/ElmerCSC/elmerfem">GitHub</a>. Several resources can be found in is <a href="https://www.csc.fi/web/elmer">official webpage</a> and in the <a href="https://www.elmerfem.org/blog/">community portal</a> and in the <a href="https://www.elmerfem.org/forum/index.php">forum</a>. There is also an <a href="https://www.youtube.com/@elmerfem">YouTube channel</a> with several tutorials and illustration of the package capabilities.</p><p>The goal of this page is not to supersede the <a href="https://www.csc.fi/web/elmer/documentation">documentation</a>, but to make it (partially) available as a webpage where search and navigation become more intuitive. <em>Notice that this will be fed according to my personal projects and learning, so any contribution to accelerate the process is welcome.</em> Here you find a <em>user-guide-style</em> page while more details are provided in the selected notes of <a href="../Elmer-Documentation/">Elmer Documentation</a>.</p><hr/><h2 id="Quick-answers"><a class="docs-heading-anchor" href="#Quick-answers">Quick answers</a><a id="Quick-answers-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-answers" title="Permalink"></a></h2><ul><li><p><a href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/ElmerOverview.pdf">Is Elmer the adequate tool for my projects?</a> In this document you find a short introduction to what Elmer can do and the main executables. </p></li><li><p><a href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/GetStartedElmer.pdf">How do I start learning Elmer?</a> Simply put, Elmer does not require basic users to master all the fundamentals of FEM, so following the <em>getting started</em> guide seems a good starting point. There you learn how to install, configure, and run the software.</p></li><li><p><a href="https://www.nic.funet.fi/pub/sci/physics/elmer/">Where do I get the binaries of Elmer?</a> If willing to run in Windows, the previous link provides the compiled binaries; there are also instructions for installing directly in Ubuntu as well as all the documentation and other test and sample cases.</p></li><li><p><a href="https://www.elmerfem.org/forum/">I feel alone, where do I find other users?</a> The forum seems to be moderately active, so you can go there to chat with other users and developers if you are not in a hurry.</p></li></ul><hr/><h2 id="Limitations-and-issues"><a class="docs-heading-anchor" href="#Limitations-and-issues">Limitations and issues</a><a id="Limitations-and-issues-1"></a><a class="docs-heading-anchor-permalink" href="#Limitations-and-issues" title="Permalink"></a></h2><ul><li>Currently the GUI is not able to import SIF files generated manually because it stores its state in a XML file; to be able to re-run cases from the GUI users need to create the equivalent case (eventually using the free text fields) in the GUI itself before regenerating a SIF file. Notice that this will overwrite the SIF file, so keep in mind to backup the file in another directory; that is especially required for highly customized cases.</li></ul><hr/><h2 id="Ongoing-work"><a class="docs-heading-anchor" href="#Ongoing-work">Ongoing work</a><a id="Ongoing-work-1"></a><a class="docs-heading-anchor-permalink" href="#Ongoing-work" title="Permalink"></a></h2><ul><li>Development of a <a href="https://github.com/wallytutor/WallyToolbox.jl/tree/main/tools/vscode/extensions/wally-sif">VS Code syntax highlight extension</a> with help of data provided in <a href="https://github.com/ElmerCSC/elmerfem/blob/devel/fem/src/SOLVER.KEYWORDS">SOLVER.KEYWORDS</a>.</li></ul><hr/><h2 id="Retrieving-materials"><a class="docs-heading-anchor" href="#Retrieving-materials">Retrieving materials</a><a id="Retrieving-materials-1"></a><a class="docs-heading-anchor-permalink" href="#Retrieving-materials" title="Permalink"></a></h2><p>Because there are plenty of interesting materials in Elmer public directory, it is worth downloading it all and selecting what to keep later. In a Linux terminal one could run the following command. If you also want to retrieve the animations, binaries, and virtual machines, consider removing and/or modifying the <code>-X</code> options.</p><pre><code class="language-bash hljs">#!/usr/bin/env bash

URL=&quot;https://www.nic.funet.fi/pub/sci/physics/elmer/&quot;

wget -r -l 20 --no-parent           \
    -X /pub/sci/physics/elmer/anim/ \
    -X /pub/sci/physics/elmer/bin/  \
    -R &quot;index.html*&quot;                \
    ${URL}</code></pre><hr/><h2 id="Preprocessing-steps"><a class="docs-heading-anchor" href="#Preprocessing-steps">Preprocessing steps</a><a id="Preprocessing-steps-1"></a><a class="docs-heading-anchor-permalink" href="#Preprocessing-steps" title="Permalink"></a></h2><ul><li><p>Other than the native <code>ElmerGrid</code>, several other software can be used for conceiving a geometry and mesh generation workflow. Users are encouraged to use external tools such as <a href="https://gmsh.info/">gmsh</a> or <a href="https://www.salome-platform.org/">Salome</a> to generate computational meshes, built-in support in Elmer bein limited to very simple geometries only. For complex geometries <a href="https://www.freecad.org/">FreeCAD</a> is a standout alternative. For more consider reading <a href="../Geometry-and-Preprocessing/">Geometry and Preprocessing</a>.</p></li><li><p>Not all <code>gmsh</code> standard mesh formats are supported, but only version 2 (as for OpenFOAM); that said, users are encouraged to export mesh in UNV format to avoid compatibility issues, and also because both proposed tools support it. You can control the element orders in command line using option <code>-order &lt;N&gt;</code>; gmsh operates this way so that the same script can generate any supported element type.</p></li><li><p>For importing meshes one uses <code>ElmerGrid &lt;input-format&gt; &lt;output-format&gt;</code>, where the format arguments are documented in the <a href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/ElmerGridManual.pdf">manual</a> sections 1.3 and 1.4. The UNV input is given by number 8 while standard <code>ElmerSolver</code> output by number 2, so that the conversion command would start with <code>ElmerGrid 8 2 &lt;other-arguments...&gt;</code>. Always verify the number of nodes remain untouched after conversion - or if it changed when using option <code>-merge &lt;dist&gt;</code>, merging nodes that are closer than the user-defined <code>&lt;dist&gt;</code>.</p></li><li><p>Remember to use <code>Coherence;</code>  with OpenCASCADE factory in gmsh scripts to automatically strip internal faces; that might not be enough for complex cases, see below. <strong>Note:</strong> I tried doing so and unless <code>Physical Surfaces</code> naming the external boundaries are provided every interface is dumped and imported by Elmer; maybe I misunderstood the use of command!</p></li><li><p>Because faces are not named in Elmer, <em>i.e.</em> no matter what <code>Physical Surface</code> names you provide in gmsh, even for the advanced user working from command line it might be interesting to use the interactive zone grouping capabilities of <code>ElmerGUI</code>. That might even become a <em>requirement</em> as geometric complexity grows.</p></li></ul><table><tr><th style="text-align: right">Software</th><th style="text-align: right">Notes</th></tr><tr><td style="text-align: right">FreeCAD</td><td style="text-align: right">Geometry only for now, probably the best in the list; good parametric modeling support.</td></tr><tr><td style="text-align: right">Salome</td><td style="text-align: right">Can export UNV (8) meshes readable by Elmer. An extension to call Elmer directly from Salome is under development.</td></tr><tr><td style="text-align: right">gmsh</td><td style="text-align: right">Can export MSH2 (14) and UNV (8) formats readable by Elmer.</td></tr><tr><td style="text-align: right">netgen</td><td style="text-align: right">Is able to write native Elmer linear meshes; can be used as a plug-in.</td></tr><tr><td style="text-align: right">tetgen</td><td style="text-align: right">Can be used as a plug-in.</td></tr></table><h2 id="Using-Elmer"><a class="docs-heading-anchor" href="#Using-Elmer">Using Elmer</a><a id="Using-Elmer-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Elmer" title="Permalink"></a></h2><ul><li><p>Newcomers might be interested in <code>ElmerGUI</code>; although very intuitive, the interface is quite limited and for complex programs running from command line is the preferred mode.</p></li><li><p>Most users will finally end setting up an workflow employing both to <code>ElmerSolver</code> (to run the simulations) and <code>ElmerGrid</code> (to prepare the grid and setup parallelization).</p></li><li><p>There is also <code>ViewFactors</code> which might be useful in special cases involving radiation and other executables but they are not mentioned here because they fall in the legacy code family.</p></li><li><p>Users must be aware that Elmer has no default unit system; one must take care that units are coherent across the different models and materials.</p></li><li><p>Support to mathematical operations in SIF through MATC, which has its own <a href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/MATCManual.pdf">syntax and documentation</a>. It can be used, <em>e.g.</em> for computing temperature dependent properties, what can be helpful for simple expressions (instead of writing Fortran 90 code for extensions).</p></li></ul><h2 id="Parallel-computing"><a class="docs-heading-anchor" href="#Parallel-computing">Parallel computing</a><a id="Parallel-computing-1"></a><a class="docs-heading-anchor-permalink" href="#Parallel-computing" title="Permalink"></a></h2><ul><li><p>Before running in parallel a working case running in serial is required; using <code>ElmerGUI</code> this can be enabled in <code>Run &gt; Parallel settings...</code>. Notice that after running postprocessing of <code>.pvtu</code> needs to be done in ParaView directly.</p></li><li><p>To partition the mesh from command line one needs to run <code>ElmerGrid 2 2 &lt;mesh-name&gt; -partdual -metiskway &lt;N&gt;</code>, which will convert <code>&lt;mesh-name&gt;</code> from Elmer mesh format (2) into itself (thus the <code>2 2</code> in the command) and dump the resulting mesh in <code>partitions.&lt;N&gt;</code>, with <code>&lt;N&gt;</code> being the number of physical cores to run the simulation.</p></li><li><p>Parallel cases can be run with <code>mpiexec -n &lt;N&gt; ElmerSolver_mpi</code>. Notice that under Linux the MPI runner is called <code>mpirun</code> instead of <code>mpiexec</code>.</p></li></ul><h2 id="Tips-and-ideas"><a class="docs-heading-anchor" href="#Tips-and-ideas">Tips and ideas</a><a id="Tips-and-ideas-1"></a><a class="docs-heading-anchor-permalink" href="#Tips-and-ideas" title="Permalink"></a></h2><ul><li>Use <code>Coordinate Mapping</code> to rotate meshes with oriented particles</li><li>Scaling of a single direction can be done with <code>Coordinate Scaling</code></li><li>Time step can be changed with a list of elements in <code>Timestep Intervals</code>, <em>e.g.</em></li></ul><pre><code class="language-Fortran hljs">! Run 10 time-steps of 0.1 s, then 100 with 1.0 s.
Timestep Intervals(2) = 10 100
Timestep Sizes(2) = 0.1 1.0</code></pre><ul><li>Take care with <code>Linear System Abort Not Converged = True</code> for physical consistency; generally continuing a simulation after a failed step is worthless unless one is pseudo-stepping towards a difficult (highly nonlinear) steady-state.</li></ul><h2 id="Material-properties"><a class="docs-heading-anchor" href="#Material-properties">Material properties</a><a id="Material-properties-1"></a><a class="docs-heading-anchor-permalink" href="#Material-properties" title="Permalink"></a></h2><p>Material properties can be specified as:</p><ul><li><p>Constant: just the default numeric input in SIF files</p></li><li><p>Tabulated linearly or using a cubic spline, <em>e.g.</em></p></li></ul><pre><code class="language-Fortran hljs">! Linear interpolation
Viscosity = Variable Temperature
  Real
	298.15 1.0
	! ... more data here
	373.15 2.0
End

! Cubic spline interpolation
Viscosity = Variable Temperature
  Real cubic
	298.15 1.0
	315.15 1.1
	345.15 1.5
	! ... more data here
	373.15 2.0
End</code></pre><ul><li>Arrays: for representing anisotropic bodies, <em>e.g.</em></li></ul><pre><code class="language-Fortran hljs">Heat Conductivity(3,3) = 1 0 0\
                         0 1 0\
                         0 0 2</code></pre><ul><li><p>Using MATC as explained <a href="../Elmer-Documentation/">here</a>. Notice that sourcing files in MATC is the recommended way to get reusable code; coding MATC in SIF files requires to escape all lines and quickly becomes messy.</p></li><li><p>User-defined functions (UDF) can also be provided in Fortran; notice that even when MATC can be used, this may lead to a speed-up of calculations with the inconvenient of needing more code. So for cases that are intended to be reused, it is important to consider writing proper extensions in Fortran. The following example illustrates a temperature dependent thermal conductivity function which is evaluated by Elmer at all nodes. In most cases a simple <code>USE DefUtils</code> is enough to get the required Elmer API to write the extension.</p></li></ul><pre><code class="language-Fortran hljs">FUNCTION conductivity(model, n, time) RESULT(k)
    !**************************************************************
    ! Load Elmer library.
    !**************************************************************
    
    USE DefUtils
    IMPLICIT None

    !**************************************************************
    ! Function interface.
    !**************************************************************
    
    TYPE(Model_t) :: model
    INTEGER       :: n
    REAL(KIND=dp) :: time, k

    !**************************************************************
    ! Function internals.
    !**************************************************************
    
    TYPE(Variable_t), POINTER :: varptr
    REAL(KIND=dp) :: T
    INTEGER :: idx

    !**************************************************************
    ! Actual implementation
    !**************************************************************

    ! Retrieve pointer to the temperature variable.
    varptr =&gt; VariableGet(model%Variables, &#39;Temperature&#39;)

    ! Access index of current node.
    idx = varptr%Perm(n)

    ! Retrieve nodal temperature.
    T = varptr%Values(idx)

    ! Compute heat conductivity from NodalTemperature, k=k(T)
    k = 2.0 - T * (2.5e-03 - 1.0e-06 * T)
END FUNCTION conductivity</code></pre><p>In order to compile the above assume it is written to <code>properties.f90</code> file; then one can call <code>elmerf90 properties.f90 –o properties</code> to generate the required shared library that is loaded in runtime by Elmer. Below we illustrate the use of <code>Procedure</code> to attach this library to a given material; first one provides the name of the shared library then the name of the function. A single library can in fact contain several functionalities.</p><pre><code class="language-C hljs">Material 1
  Name = &quot;Solid&quot;
  Heat Conductivity = Variable Time
    Procedure &quot;properties&quot; &quot;conductivity&quot;
  Heat Capacity = 1000
  Density = 2500
End</code></pre><h2 id="Postprocessing"><a class="docs-heading-anchor" href="#Postprocessing">Postprocessing</a><a id="Postprocessing-1"></a><a class="docs-heading-anchor-permalink" href="#Postprocessing" title="Permalink"></a></h2><p>For postprocessing the recommended way is by using external tools as <a href="https://www.paraview.org/">ParaView</a> and <a href="https://docs.pyvista.org/version/stable/">PyVista</a>, both handling well the VTK format of outputs. Nonetheless there are a some in-solver processing utilities that are worth knowing, especially in what concerns extracting and filtering data from certain regions, creating new fields, and computing fluxes.</p><h3 id="Creating-a-new-scalar"><a class="docs-heading-anchor" href="#Creating-a-new-scalar">Creating a new scalar</a><a id="Creating-a-new-scalar-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-new-scalar" title="Permalink"></a></h3><p>The keyword set of materials is actually not fixed; one can, for instance, create composition field in different units with MATC, as illustrated below (case <a href="https://github.com/wallytutor/WallyToolbox.jl/tree/main/apps/Elmer/diffusion_solids/carburizing_slycke_gui">here</a>):</p><pre><code class="language-Fortran hljs">MoleFraction = Variable Concentration
  Real MATC &quot;carbonmolefraction(tx)&quot;</code></pre><p>Then in solver <code>SaveMaterials</code>, this new name <code>MoleFraction</code> can be used as a variable:</p><pre><code class="language-Fortran hljs">Solver 1
  Equation = SaveMaterials
  Parameter 1 = Concentration Diffusivity
  Parameter 2 = MoleFraction
  Procedure = &quot;SaveData&quot; &quot;SaveMaterials&quot;
  Exec Solver = After Timestep
End</code></pre><p>Another situation that can be frequently found is unit conversion for temperature. It was chosen to implement it in <a href="https://github.com/wallytutor/WallyToolbox.jl/tree/main/apps/Elmer/conduction_refractory/transient_parallel">this case</a> because it is multi-material; that is a reminder that in such cases the new variable needs to be created for all materials (as this is a tweak, since the temperature is not a material property, but a global field). If forgotten in one material, an error will show up in ParaView telling you that the field is not available in some regions.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../OpenFOAM11/">« OpenFOAM 11</a><a class="docs-footer-nextpage" href="../Elmer-Documentation/">Elmer Documentation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Sunday 2 June 2024 08:08">Sunday 2 June 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
