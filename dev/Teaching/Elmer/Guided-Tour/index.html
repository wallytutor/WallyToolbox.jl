<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Guided Tour · WallyToolbox.jl</title><meta name="title" content="Guided Tour · WallyToolbox.jl"/><meta property="og:title" content="Guided Tour · WallyToolbox.jl"/><meta property="twitter:title" content="Guided Tour · WallyToolbox.jl"/><meta name="description" content="Documentation for WallyToolbox.jl."/><meta property="og:description" content="Documentation for WallyToolbox.jl."/><meta property="twitter:description" content="Documentation for WallyToolbox.jl."/><meta property="og:url" content="https://wallytutor.github.io/WallyToolbox.jl/Teaching/Elmer/Guided-Tour/"/><meta property="twitter:url" content="https://wallytutor.github.io/WallyToolbox.jl/Teaching/Elmer/Guided-Tour/"/><link rel="canonical" href="https://wallytutor.github.io/WallyToolbox.jl/Teaching/Elmer/Guided-Tour/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">WallyToolbox.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Dry Packages</span><ul><li><a class="tocitem" href="../../../DryCombustion/">DryCombustion</a></li><li><a class="tocitem" href="../../../DryFlowsheet/">DryFlowsheet</a></li><li><a class="tocitem" href="../../../DryGranular/">DryGranular</a></li><li><a class="tocitem" href="../../../DryMaterials/">DryMaterials</a></li><li><a class="tocitem" href="../../../DryTransport/">DryTransport</a></li><li><a class="tocitem" href="../../../helpers/">Helpers</a></li></ul></li><li><a class="tocitem" href="../../../Cantera/">Cantera</a></li><li><a class="tocitem" href="../../../OpenFOAM/">OpenFOAM</a></li><li><a class="tocitem" href="../../../RadCalNet/">RadCalNet</a></li><li><a class="tocitem" href="../../../toc/">Table of Contents</a></li><li><a class="tocitem" href="../../../References/">References</a></li><li><span class="tocitem">Teaching</span><ul><li><a class="tocitem" href="../../Machine Learning/">Machine Learning</a></li><li><a class="tocitem" href="../../Transport Phenomena/">Transport Phenomena</a></li><li><a class="tocitem" href="../../Basilisk/Basilisk/">Basilisk</a></li><li><a class="tocitem" href="../../OpenFOAM/">OpenFOAM</a></li><li><a class="tocitem" href="../">Elmer</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Guided Tour</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Guided Tour</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/wallytutor/WallyToolbox.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/wallytutor/WallyToolbox.jl/blob/main/docs/tmp/Teaching/Elmer/Guided-Tour.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Guided-Tour"><a class="docs-heading-anchor" href="#Guided-Tour">Guided Tour</a><a id="Guided-Tour-1"></a><a class="docs-heading-anchor-permalink" href="#Guided-Tour" title="Permalink"></a></h1><hr/><h2 id="Quick-answers"><a class="docs-heading-anchor" href="#Quick-answers">Quick answers</a><a id="Quick-answers-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-answers" title="Permalink"></a></h2><ul><li><p><a href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/ElmerOverview.pdf">Is Elmer the adequate tool for my projects?</a> In this document you find a short introduction to what Elmer can do and the main executables. </p></li><li><p><a href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/GetStartedElmer.pdf">How do I start learning Elmer?</a> Simply put, Elmer does not require basic users to master all the fundamentals of FEM, so following the <em>getting started</em> guide seems a good starting point. There you learn how to install, configure, and run the software.</p></li><li><p><a href="https://www.nic.funet.fi/pub/sci/physics/elmer/">Where do I get the binaries of Elmer?</a> If willing to run in Windows, the previous link provides the compiled binaries; there are also instructions for installing directly in Ubuntu as well as all the documentation and other test and sample cases.</p></li><li><p><a href="https://www.elmerfem.org/forum/">I feel alone, where do I find other users?</a> The forum seems to be moderately active, so you can go there to chat with other users and developers if you are not in a hurry.</p></li></ul><hr/><h2 id="Geometry-and-mesh"><a class="docs-heading-anchor" href="#Geometry-and-mesh">Geometry and mesh</a><a id="Geometry-and-mesh-1"></a><a class="docs-heading-anchor-permalink" href="#Geometry-and-mesh" title="Permalink"></a></h2><ul><li><p>Users are encouraged to use external tools such as <a href="https://gmsh.info/">gmsh</a> or <a href="https://www.salome-platform.org/">Salome</a> to generate computational meshes, built-in support in Elmer bein limited to very simple geometries only.</p></li><li><p>Not all <code>gmsh</code> standard mesh formats are supported, but only version 2 (as for OpenFOAM); that said, users are encouraged to export mesh in UNV format to avoid compatibility issues, and also because both proposed tools support it. You can control the element orders in command line using option <code>-order &lt;N&gt;</code>; gmsh operates this way so that the same script can generate any supported element type.</p></li><li><p>For importing meshes one uses <code>ElmerGrid &lt;input-format&gt; &lt;output-format&gt;</code>, where the format arguments are documented in the <a href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/ElmerGridManual.pdf">manual</a> sections 1.3 and 1.4. The UNV input is given by number 8 while standard <code>ElmerSolver</code> output by number 2, so that the conversion command would start with <code>ElmerGrid 8 2 &lt;other-arguments...&gt;</code>. Always verify the number of nodes remain untouched after conversion - or if it changed when using option <code>-merge &lt;dist&gt;</code>, merging nodes that are closer than the user-defined <code>&lt;dist&gt;</code>.</p></li><li><p>Remember to use <code>Coherence;</code>  with OpenCASCADE factory in gmsh scripts to automatically strip internal faces; that might not be enough for complex cases, see below. <strong>Note:</strong> I tried doing so and unless <code>Physical Surfaces</code> naming the external boundaries are provided every interface is dumped and imported by Elmer; maybe I misunderstood the use of command!</p></li><li><p>Because faces are not named in Elmer, <em>i.e.</em> no matter what <code>Physical Surface</code> names you provide in gmsh, even for the advanced user working from command line it might be interesting to use the interactive zone grouping capabilities of <code>ElmerGUI</code>. That might even become a <em>requirement</em> as geometric complexity grows.</p></li></ul><hr/><h2 id="Using-Elmer"><a class="docs-heading-anchor" href="#Using-Elmer">Using Elmer</a><a id="Using-Elmer-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Elmer" title="Permalink"></a></h2><ul><li><p>Newcomers might be interested in <code>ElmerGUI</code>; although very intuitive, the interface is quite limited and for complex programs running from command line is the preferred mode.</p></li><li><p>Most users will finally end setting up an workflow employing both to <code>ElmerSolver</code> (to run the simulations) and <code>ElmerGrid</code> (to prepare the grid and setup parallelization).</p></li><li><p>There is also <code>ViewFactors</code> which might be useful in special cases involving radiation and other executables but they are not mentioned here because they fall in the legacy code family.</p></li><li><p>Users must be aware that Elmer has no default unit system; one must take care that units are coherent across the different models and materials.</p></li><li><p>Support to mathematical operations in SIF through MATC, which has its own <a href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/MATCManual.pdf">syntax and documentation</a>. It can be used, <em>e.g.</em> for computing temperature dependent properties, what can be helpful for simple expressions (instead of writing Fortran 90 code for extensions).</p></li></ul><hr/><h2 id="Parallel-computing"><a class="docs-heading-anchor" href="#Parallel-computing">Parallel computing</a><a id="Parallel-computing-1"></a><a class="docs-heading-anchor-permalink" href="#Parallel-computing" title="Permalink"></a></h2><ul><li><p>Before running in parallel a working case running in serial is required; using <code>ElmerGUI</code> this can be enabled in <code>Run &gt; Parallel settings...</code>. Notice that after running postprocessing of <code>.pvtu</code> needs to be done in ParaView directly.</p></li><li><p>To partition the mesh from command line one needs to run <code>ElmerGrid 2 2 &lt;mesh-name&gt; -partdual -metiskway &lt;N&gt;</code>, which will convert <code>&lt;mesh-name&gt;</code> from Elmer mesh format (2) into itself (thus the <code>2 2</code> in the command) and dump the resulting mesh in <code>partitions.&lt;N&gt;</code>, with <code>&lt;N&gt;</code> being the number of physical cores to run the simulation.</p></li><li><p>Parallel cases can be run with <code>mpiexec -n &lt;N&gt; ElmerSolver_mpi</code>. Notice that under Linux the MPI runner is called <code>mpirun</code> instead of <code>mpiexec</code>.</p></li></ul><hr/><h2 id="Postprocessing"><a class="docs-heading-anchor" href="#Postprocessing">Postprocessing</a><a id="Postprocessing-1"></a><a class="docs-heading-anchor-permalink" href="#Postprocessing" title="Permalink"></a></h2><ul><li>Also for postprocessing the recommended way is by using external tools as <a href="https://www.paraview.org/">ParaView</a> and <a href="https://docs.pyvista.org/version/stable/">PyVista</a>, both handling well the VTK format of outputs.</li></ul><hr/><h2 id="Limitations-and-issues"><a class="docs-heading-anchor" href="#Limitations-and-issues">Limitations and issues</a><a id="Limitations-and-issues-1"></a><a class="docs-heading-anchor-permalink" href="#Limitations-and-issues" title="Permalink"></a></h2><ul><li>Currently the GUI is not able to import SIF files generated manually because it stores its state in a XML file; to be able to re-run cases from the GUI users need to create the equivalent case (eventually using the free text fields) in the GUI itself before regenerating a SIF file. Notice that this will overwrite the SIF file, so keep in mind to backup the file in another directory; that is especially required for highly customized cases.</li></ul><hr/><h2 id="Material-properties"><a class="docs-heading-anchor" href="#Material-properties">Material properties</a><a id="Material-properties-1"></a><a class="docs-heading-anchor-permalink" href="#Material-properties" title="Permalink"></a></h2><p>Material properties can be specified as:</p><ul><li><p>Constant: just the default numeric input in SIF files</p></li><li><p>Tabulated linearly or using a cubic spline, <em>e.g.</em></p></li></ul><pre><code class="language-Fortran hljs">! Linear interpolation
Viscosity = Variable Temperature
  Real
	298.15 1.0
	! ... more data here
	373.15 2.0
End

! Cubic spline interpolation
Viscosity = Variable Temperature
  Real cubic
	298.15 1.0
	315.15 1.1
	345.15 1.5
	! ... more data here
	373.15 2.0
End</code></pre><ul><li><p>Using MATC as explained <a href="../MATC/">here</a>. Notice that sourcing files in MATC is the recommended way to get reusable code; coding MATC in SIF files requires to escape all lines and quickly becomes messy.</p></li><li><p>User-defined functions (UDF) can also be provided in Fortran... (to be continued).</p></li></ul></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 23 May 2024 10:06">Thursday 23 May 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
